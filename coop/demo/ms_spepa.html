<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.51.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY29uZXhvbi1kZXNpZ24iLCJhIjoiY2pvdzZlb2djMXVhOTN3bmhpYzk3NndoZCJ9.On4IrAd0sgmmgd_sAqg_Gg';
var map = new mapboxgl.Map({
    container: 'map',
    hash: true,
    style: 'mapbox://styles/conexon-design/cjow6vt3sax7q2rpbj5wm7s84',
    zoom: 10,
    center: [-89.943,32.153]
});

var span_url = 'mapbox://conexon-design.4e0loiz2' 
var span_source_layer = 'ms_spepa_span-8k20f2' 
 
var substat_url = 'mapbox://conexon-design.4lom0vuf'
var substat_source_layer = 'ms_spepa_substations-dld4cy'

var spanAerial = '#551a8b' //purple
var spanUnder = '#FFA500'


var myBlue = '#0000FF'
var myOrange = '#FFA500'
var myGreen = '#008000'
var myBrown = '#894444'
var mySlate = '#808080'
var myWhite = '#FFFFFF'
var myRed = '#FF0000'
var myBlack = '#000000'
var myYellow = '#FFFF00'
var myViolet = '#EE82EE'
var myRose = '#FFC0CB'
var myAqua = '#00FFFF'
var spanColor = '#800080'
var tapColor = '#bababa'//'#c4c4c4'
var spanAerial = '#551a8b' //purple
var spanUnder = '#FFA500'
var seqColor = '#A9A9A9' //'#FFA500'


//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        // filter: ["all",['==', 'ml_substat', '04']],
        'paint': {
            'line-width': .75,
            'line-color': seqColor
        }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_1',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '1']],
        'paint': {
            'line-width': 1.75,
            'line-color': myBlue 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_22',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '22']],
        'paint': {
            'line-width': 1.75,
            'line-color': myOrange 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_27',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '27']],
        'paint': {
            'line-width': 1.75,
            'line-color': myGreen 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_32',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '32']],
        'paint': {
            'line-width': 1.75,
            'line-color': myRed 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_34',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '34']],
        'paint': {
            'line-width': 1.75,
            'line-color': myViolet 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_38',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '38']],
        'paint': {
            'line-width': 1.75,
            'line-color': myBrown 
                }
    }); 
});

//remember shapefile fields need to be upper case for mapbox to recognize them
//span
map.on('load', function () {
     map.addLayer({//SPAN
        'id': 'span_39',
        'type': 'line',
         'source': {
            type: 'vector', 
            url: span_url},
        'source-layer': span_source_layer,
        filter: ["all",['==', 'ml_substat', '39']],
        'paint': {
            'line-width': 1.75,
            'line-color': myAqua 
                }
    }); 
});



// //remember shapefile fields need to be upper case for mapbox to recognize them
// //span
// map.on('load', function () {
//      map.addLayer({//SPAN
//         'id': 'span',
//         'type': 'line',
//          'source': {
//             type: 'vector', 
//             url: span_url},
//         'source-layer': span_source_layer,
//         // filter: ["all",['==', 'ml_substat', '04']],
//         'paint': {
//             'line-width': .75,
//             'line-color': {
//                 property: 'ml_subtype',
//                 type: 'categorical',
//                 stops: [ [1,spanAerial],
//                     [2, spanAerial],
//                     [3, spanUnder],
//                     [4, spanUnder]] } 
//                 }
//     }); 
// });


// //consumers-outside ring
// map.on('load', function () {
//     map.addLayer({//CONSUMERS
//         'id': 'consumers-rings',
//         'type': 'circle',
//         'source': {
//             type: 'vector', 
//             url: consumers_url},
//         'source-layer': consumers_source_layer,
//         'filter': ["all",['==', 'ML_SUBSTAT', ml_substat],['==', 'ML_FEEDER', ml_feeder]],
//         'layout': {'visibility': 'visible'},
//         'paint': {
//             'circle-radius': {
//                 'base': .9,
//                 'stops': [[12, 1], [13,4], [14,5], [15,6], [16,10] ]}, 
//             'circle-color': myOrange}
//     }); 
// });

// //consumers-inside ring
// map.on('load', function () {
//     map.addLayer({//CONSUMERS
//         'id': 'consumers-inside',
//         'type': 'circle',
//         'source': {
//             type: 'vector', 
//             url: consumers_url},
//         'source-layer': consumers_source_layer,
//         'filter': ["all",['==', 'ML_SUBSTAT', ml_substat],['==', 'ML_FEEDER', ml_feeder]],
//         'layout': {'visibility': 'visible'},
//         'paint': {
//             'circle-radius': {
//                 'base': .9,
//                 'stops': [[12, 1], [13,3], [14,4], [15,5], [16,9] ]}, //, [22, 60]] }, 
//             'circle-color': myWhite}
//     }); 
// });

// //consumers-text - 'M'
// map.on('load', function () {
//      map.addLayer({//CONSUMERS
//         'id': 'consumers-text',
//         'type': 'symbol',
//         'source': {
//             type: 'vector', 
//             url: consumers_url},
//         'source-layer': consumers_source_layer,
//         'filter': ["all",['==', 'ML_SUBSTAT', ml_substat],['==', 'ML_FEEDER', ml_feeder]],
//         'paint': {
//             'text-color': myOrange},
//         'layout': {
//             'text-field':'M', //
//             'text-font': ["Open Sans Semibold", "Arial Unicode MS Bold"],
//             'text-allow-overlap': true,
//             'text-size': {
//                 'base': 1, 
//                 'stops': [[12, 5], [13,6], [14,8], [15,8], [16,12] ]}}
//     }); 
// });


//Substation - these are squares
map.on('load', function () {
    map.addLayer({//SUBSTATION
        'id': 'substation',
        'type': 'symbol',
        'source': {
            type: 'vector', 
            url: substat_url},
        'source-layer': substat_source_layer,
        //'filter': ['==', 'ML_SUBSTAT', ml_substat],
        'layout': {
            'visibility': 'visible',
            'icon-image': 'black-square-15',
            'icon-size':{
                 'base': .5,
                 'stops': [[12, .75], [13,1.25], [14,1.75], [15,2.25], [16,3.75] ]} }
    }); 
});

</script>
</body>
</html>
